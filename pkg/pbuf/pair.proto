syntax = "proto3";

package pbuf.v1;

option go_package = "alat/pkg/pbuf";

message Color {
  string name = 1;
}
enum DeviceType {
  DEVICE_TYPE_UNSPECIFIED = 0;
  DEVICE_TYPE_MOBILE = 1;
  DEVICE_TYPE_DESKTOP = 2;
  DEVICE_TYPE_TV = 3;
}
message DeviceInfo {
  string id = 1;
  string name = 2;
  DeviceType type = 3;
  Color color = 4;
}

message DeviceDetails {
  bytes certificate = 1;
  string name = 2;
  DeviceType type = 3;
  Color color = 4;
}

message PairingSession {
  DeviceInfo initiator = 1;
  DeviceInfo responder = 2;
  bytes token = 3;
}

message RequestPairRequest {
  string token = 1;
  DeviceInfo info = 2;
  bytes certificate = 3;
}
message RequestPairResponse {
  string token = 1;
  bool accepted = 2;
  DeviceInfo info = 3;
  bytes certificate = 4;
}

message GetDetailsRequest {}
message GetDetailsResponse {
  DeviceDetails details = 1;
}

service AlatService {
  rpc RequestPair(RequestPairRequest) returns (RequestPairResponse);
  rpc GetDetails(GetDetailsRequest) returns (GetDetailsResponse);
}
